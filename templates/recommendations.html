<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>StyleSync | Recommendations</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <style>
        body {
            margin: 0;
            font-family: 'Segoe UI', sans-serif;
            background-color: #FAFAFA;  /* Misty White */
            color: #2F2F2F;  /* Cool Charcoal */
        }

        .video-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1; /* Ensure the video is behind other elements */
            object-fit: cover; /* Ensure the video covers the entire screen */
            filter: none;
            background-color: black; /* Fallback background color */
        }

        .navbar {
            background-color: rgba(47, 47, 47, 0.6); /* Semi-transparent navbar */
            padding: 15px 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .navbar .logo {
            color: #7FB3D5;  /* Sky Blue */
            font-size: 24px;
            font-weight: bold;
        }

        .navbar ul {
            list-style-type: none;
            display: flex;
            gap: 20px;
            margin: 0;
            padding: 0;
        }

        .navbar ul li a {
            text-decoration: none;
            color: #FAFAFA;
            font-weight: 500;
            transition: color 0.3s ease;
        }

        .navbar ul li a:hover {
            color: #F7CAC9;  /* Blush Pink */
        }

        .form-section {
            padding: 50px 20px;
            text-align: center;
        }

        form {
            display: inline-block;
            text-align: left;
            background-color: #D8D5DB; /* Transparent background */
            padding: 30px 40px;
            border-radius: 12px;
            box-shadow: 0 0 10px rgba(47, 47, 47, 0.3); /* Subtle shadow for visibility */
            max-width: 400px;
            width: 100%;
            opacity: 0.9; /* Slightly transparent */
        }

        form label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
            color: #000000; /* White text for better contrast */
        }

        form select, form button {
            width: 100%;
            padding: 10px;
            margin-bottom: 20px;
            border-radius: 6px;
            border: 1px solid #D8D5DB;
            font-size: 14px;
        }

        form button {
            background-color: #7FB3D5;  /* Sky Blue */
            color: white;
            font-weight: bold;
            border: none;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }

        form button:hover {
            background-color: #5C9DBF;
        }

        h2 {
            color: #FAFAFA; /* White text for better contrast */
            margin-bottom: 30px;
        }

        .recommendation-grid {
            display: flex;
            flex-wrap: wrap;
            gap: 30px;
            justify-content: center;
            margin-top: 30px;
        }

        .recommendation-card {
            background: rgba(255,255,255,0.97);
            border-radius: 18px;
            box-shadow: 0 4px 24px rgba(47,47,47,0.18);
            padding: 32px 36px;
            min-width: 260px;
            max-width: 340px;
            margin-bottom: 22px;
            position: relative;
            border: 1.5px solid #e0e0e0;
            opacity: 0.98;
            transition: transform 0.2s, box-shadow 0.2s;
        }
        .recommendation-card:hover {
            transform: translateY(-8px) scale(1.05);
            box-shadow: 0 10px 36px rgba(127,179,213,0.22);
        }
        .recommendation-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 12px;
        }
        .pill {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 0.95em;
            color: #fff;
            background: #7FB3D5;
            margin-right: 6px;
            margin-bottom: 4px;
        }
        .pill.occasion {
            background: #F7CAC9;
            color: #2F2F2F;
        }
        .recommendation-card ul {
            padding-left: 18px;
            margin-bottom: 10px;
        }
        .recommendation-card .meta {
            font-size: 0.95em;
            color: #888;
        }

    </style>
</head>
<script>
    function openDialog(id) {
        document.getElementById('rec-dialog-' + id).showModal();
    }
    function closeDialog(id) {
        document.getElementById('rec-dialog-' + id).close();
    }
</script>

<body>

    <video autoplay muted loop class="video-bg">
        <source src="{{ url_for('static', filename='videos/Vid2_styleSync.mp4') }}" type="video/mp4">
        Your browser does not support the video tag.
    </video>

    <nav class="navbar">
        <div class="logo">StyleSync</div>
        <ul>
            <li><a href="/home">Home</a></li>
            <li><a href="/recommendations">Recommendations</a></li>
            <li><a href="/logout">Logout</a></li>
        </ul>
    </nav>

    <section class="form-section">
        <h2>Find Your Style</h2>
        <form method="POST" action="{{ url_for('get_recommendations') }}">
            <div class="form-group">
                <label for="gender">Gender:</label>
                <select name="gender" id="gender" required>
                    <option value="">--Select--</option>
                    <option value="Male">Male</option>
                    <option value="Female">Female</option>
                </select>
            </div>

            <div class="form-group">
                <label for="bodytype">Body Type:</label>
                <select name="bodytype" id="bodytype" required>
                    <option value="">--Select--</option>
                    <option value="Rectangle">Rectangle</option>
                    <option value="Triangle">Triangle</option>
                    <option value="Inverted Triangle">Inverted Triangle</option>
                    <option value="Hourglass">Hourglass</option>
                    <option value="Oval">Oval</option>
                    <option value="Pear">Pear</option>
                </select>
            </div>

            <div class="form-group">
                <label for="skintone">Skin Tone:</label>
                <select name="skintone" id="skintone" required>
                    <option value="">--Select--</option>
                    <option value="Fair">Fair</option>
                    <option value="Medium">Medium</option>
                    <option value="Olive">Olive</option>
                    <option value="Dark">Dark</option>
                </select>
            </div>

            <div class="form-group">
                <label for="aesthetic">Aesthetic:</label>
                <select name="aesthetic" id="aesthetic" required>
                    <option value="1">Soft girl (pastel)</option>
                    <option value="2">Old money (chic)</option>
                    <option value="3">Streetstyle</option>
                </select>
            </div>

            <div class="form-group">
                <label for="occasion">Occasion:</label>
                <select name="occasion" id="occasion" required>
                    <option value="1">Party</option>
                    <option value="2">Work</option>
                    <option value="3">Casual</option>
                    <option value="4">Ethnic</option>
                </select>
            </div>

            <button type="submit">Get Recommendations</button>
        </form>
    </section>

    {% with messages = get_flashed_messages() %}
        {% if messages %}
            {% for message in messages %}
                <div class="alert">{{ message }}</div>
            {% endfor %}
        {% endif %}
    {% endwith %}

    <section class="recommendations-section">
    <div class="recommendation-grid">
    {% if recommendations %}
        {% for rec in recommendations %}
            {% if rec.Topwear and rec.AestheticName %}
            <div class="recommendation-card" onclick="openDialog('{{ loop.index0 }}')" style="cursor:pointer;">
                <div class="recommendation-header">
                    <span class="pill aesthetic">{{ rec.AestheticName }}</span>
                    <span class="pill occasion">{{ rec.OccasionName }}</span>
                </div>
                <ul>
                    <li><strong>Topwear:</strong> {{ rec.Topwear }}</li>
                    <li><strong>Bottomwear:</strong> {{ rec.Bottomwear }}</li>
                    <li><strong>Footwear:</strong> {{ rec.Footwear }}</li>
                    <li><strong>Accessory:</strong> {{ rec.Accessory }}</li>
                </ul>
                <div class="meta">
                    <span>{{ rec.Gender }}, {{ rec.BodyType }}, {{ rec.SkinTone }}</span>
                </div>
            </div>
            <dialog id="rec-dialog-{{ loop.index0 }}" class="rec-dialog">
                <h3>{{ rec.AestheticName }} | {{ rec.OccasionName }}</h3>
                <ul>
                    <li><strong>Topwear:</strong> {{ rec.Topwear }}</li>
                    <li><strong>Bottomwear:</strong> {{ rec.Bottomwear }}</li>
                    <li><strong>Footwear:</strong> {{ rec.Footwear }}</li>
                    <li><strong>Accessory:</strong> {{ rec.Accessory }}</li>
                </ul>
                <div class="meta">
                    <span>{{ rec.Gender }}, {{ rec.BodyType }}, {{ rec.SkinTone }}</span>
                </div>
                <button onclick="closeDialog('{{ loop.index0 }}')">Close</button>
            </dialog>
            {% endif %}
        {% endfor %}
    {% else %}
        <p style="color:white;text-align:center;">No recommendations found. Try different options.</p>
    {% endif %}
    </div>
</section>

</body>
<script>
function openDialog(idx) {
    document.getElementById('rec-dialog-' + idx).showModal();
}
function closeDialog(idx) {
    document.getElementById('rec-dialog-' + idx).close();
}
</script>
</html>